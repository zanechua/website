{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/services-in-homelab/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://zanechua.com"}},"posts":{"html":"<p>I was looking back at my <a href=\"/blog/universal-server-build\">Universal Server post</a> and realised I mentioned I would talk more about the services that I run in my HomeLab but never did.</p>\n<p>I pretty much FORGOT. Well, here it is now.</p>\n<h1 id=\"Services\" style=\"position:relative;\">Services<a href=\"#Services\" aria-label=\"Services permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<ul>\n<li>OPNsense</li>\n<li>PowerChute Network Shutdown (PCNS)</li>\n<li>TrueNAS</li>\n<li>VMware vCenter Server</li>\n<li>Plex</li>\n<li>FreePBX</li>\n<li>Development Ubuntu Machine</li>\n<li>Container Ubuntu Machine</li>\n</ul>\n<h2 id=\"OPNsense\" style=\"position:relative;\">OPNsense<a href=\"#OPNsense\" aria-label=\"OPNsense permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Well, OPNsense basically serves as the router/firewall for the network. I've not used a traditional consumer router in a while now and gotten used to the additional functionality provided by OPNsense. I use custom Unbound rules and configure DNSSEC and DoT (DNS over TLS).</p>\n<h2 id=\"PowerChute-Network-Shutdown\" style=\"position:relative;\">PowerChute Network Shutdown<a href=\"#PowerChute-Network-Shutdown\" aria-label=\"PowerChute Network Shutdown permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>This controls the APC UPSes that I have to know when to tell the ESXi host to safely shutdown the machines in the event of a power outage. This works pretty well for the most part</p>\n<h2 id=\"TrueNAS\" style=\"position:relative;\">TrueNAS<a href=\"#TrueNAS\" aria-label=\"TrueNAS permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>TrueNAS (Originally FreeNAS) basically serves as the storage backends for a bunch of services and content within the network.</p>\n<h2 id=\"VMware-vCenter\" style=\"position:relative;\">VMware vCenter<a href=\"#VMware-vCenter\" aria-label=\"VMware vCenter permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>I am operating 3 sites at the moment in a \"hobbyist\" capacity and almost all my servers are backed by ESXi. VMware vCenter acts as the main control plane for all of them to make sure the individual nodes are kept updated.</p>\n<p>Would love to explore more into the other features of vCenter but at this point it's mainly a glorified update manager.</p>\n<h2 id=\"Plex\" style=\"position:relative;\">Plex<a href=\"#Plex\" aria-label=\"Plex permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Ah Plex. One of my favourite software applications, this thing is a beast. Throw your content at it and it basically does all the processing. It's like running your own Netflix. There's a hybrid approach taken here in terms of storage where part of it sits in a SMB share from TrueNAS and part of it sits in the cloud.</p>\n<p>That is then merged into a single mount point via mergerfs.</p>\n<h2 id=\"FreePBX\" style=\"position:relative;\">FreePBX<a href=\"#FreePBX\" aria-label=\"FreePBX permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>It's the service for my SIP trunk which I use to connect VoIP phones across the 3 sites. Now each site has their own extension and single outgoing number. Probably overkill for a home but hey. It's fun setting up IVR and extensions.</p>\n<h2 id=\"Development-Ubuntu-Machine\" style=\"position:relative;\">Development Ubuntu Machine<a href=\"#Development-Ubuntu-Machine\" aria-label=\"Development Ubuntu Machine permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Basically this machine is my play area. I throw whatever package in it, and it is my development environment. I work in both Windows and MacOS, but if I do work on Windows, I don't usually do development directly on Windows as it's not my deployment environment. So I usually have an SMB mount point with an SSH session open to do development.</p>\n<p>All my script ideas and testing is usually done in this machine too.</p>\n<h2 id=\"Container-Ubuntu-Machine\" style=\"position:relative;\">Container Ubuntu Machine<a href=\"#Container-Ubuntu-Machine\" aria-label=\"Container Ubuntu Machine permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Initially I was intending to use something like PhotonOS but realised that in a lab environment, you might as well go with Ubuntu as I'm most familiar with it. This machine runs all the containers for a staging environment and certain environments for <a href=\"https://kopirun.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">KopiRun</a>. They aren't publicly accessible and you are required to VPN in to be able to connect to these containers.</p>","excerpt":"I was looking back at my Universal Server post and realised I mentioned I would talk more about the services that I run in my HomeLab but never did. I pretty much FORGOT. Well, here it is now. Services OPNsense PowerChute Network Shutdown (PCNSâ€¦","fields":{"readingTime":{"text":"3 min read"}},"frontmatter":{"date":"10 October, 2021","updatedAt":null,"slug":"services-in-homelab","title":"Services in my HomeLab","tags":["homelab","infrastructure","virtualization","esxi","applications"],"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA10lEQVQY02MQlnHERCIyNmKylmJy1iKyVsKyViKydliVMaBrk3USkLBX1LaJSc8Iio7XMzH39Q9S0rbml7AXkXUirFlQ0l5Gw8ojLsXSxUvH2sk6Il7byJlP3I4YzY6CUg4yyibuvoEObj6a5rYWwZFqOrZE2Sws6yQk6SCuaq6dmKMZGG1ibhWXmKwK0kyUzU584rb6Zh65ReVp2cWuPqHx6XlGVj68YjZE2CzjKCTtKCbvJK3iKqnkLKPiKqvmJi7vJCRNRGjD9QtKgUghaQcQwqYGqBkAowlRD9M7LVoAAAAASUVORK5CYII="},"backgroundColor":"transparent","images":{"fallback":{"src":"/static/f6bc4192dd528812e06522b85fa1cb71/6fc77/services-in-homelab.png","srcSet":"/static/f6bc4192dd528812e06522b85fa1cb71/85ced/services-in-homelab.png 800w,\n/static/f6bc4192dd528812e06522b85fa1cb71/7c498/services-in-homelab.png 1080w,\n/static/f6bc4192dd528812e06522b85fa1cb71/6fc77/services-in-homelab.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/f6bc4192dd528812e06522b85fa1cb71/28281/services-in-homelab.webp 800w,\n/static/f6bc4192dd528812e06522b85fa1cb71/0b5d5/services-in-homelab.webp 1080w,\n/static/f6bc4192dd528812e06522b85fa1cb71/a020d/services-in-homelab.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}}}},"comments":{"edges":[]}},"pageContext":{"slug":"services-in-homelab"}},"staticQueryHashes":["3649515864","983108779"],"slicesMap":{}}