{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/appcenter-caching-vendor-libraries/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://zanechua.com"}},"posts":{"html":"<p>You are using AppCenter as your CI/CD tool for your mobile app, and it's great in terms of helping you to distribute the apps to users to test and submitting the application to the Play Store/App Store.</p>\n<p>However, your build times are absymal and you are trying to figure out a way to cache your <code class=\"language-text\">node_modules</code>;<code class=\"language-text\">Pods</code>;<code class=\"language-text\">.gradle</code> data so that you don't have to spend <code class=\"language-text\">n</code> number of minutes waiting for the installation of data that is obviously not going to change every single update (For us react-native folks at least).</p>\n<p>You look at the AppCenter docs and shockingly in 2021, there's no way to cache ANYTHING and you find this <a href=\"https://github.com/microsoft/appcenter/issues/473\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">issue</a> which is 2 years old at this point and now you are wondering if they'll actually ever implement it or perhaps merge the service with GitHub?</p>\n<h1 id=\"Journey\" style=\"position:relative;\">Journey<a href=\"#Journey\" aria-label=\"Journey permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Trying to basically write your own cache provider for mobile apps is extremely painful, considering the time the apps take to build.. Lucky you, I've done this for you so you don't have to.</p>\n<p>I started out with trying a self-hosted MinIO server on one of my servers and I got terrible speeds. I was getting 6-7 Mb/s down/up if I remember correctly. I did a bit of searching and you can actually figure out that AppCenter runs on Azure DevOps.</p>\n<p>We know that AppCenter <a href=\"https://docs.microsoft.com/en-us/appcenter/build/software\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">only uses MacOS machines</a> for both Android and iOS, so if we look at the <a href=\"https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops&#x26;tabs=yaml#hardware\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">docs</a> for Azure DevOps with regards to Microsoft hosted agents, we see the following note.</p>\n<blockquote>\n<p>Agents that run macOS images are provisioned on Mac pros. These agents always run in the US irrespective of the location of your Azure DevOps organization. If data sovereignty is important to you and if your organization is not in the US, then you should not use macOS images.</p>\n</blockquote>\n<p>So knowing that the CI runs predominantly in the US, I think it's safe to say that they run in Azure too (go figure). The best way to implement caching would be to use an Azure Blob Storage container located in the US.</p>\n<p>Now we need a way to</p>\n<ol>\n<li>Use cache if cache is present</li>\n<li>Upload Cache if no cache is present</li>\n<li>Update cache if <code class=\"language-text\">yarn.lock</code> or <code class=\"language-text\">Podfile.lock</code> has changed</li>\n</ol>\n<h1 id=\"Solve\" style=\"position:relative;\">Solve<a href=\"#Solve\" aria-label=\"Solve permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>I'll only be going through caching of <code class=\"language-text\">node_modules</code> but the same concept applies for the other vendor folders.</p>\n<p>Please create a storage container in the <code class=\"language-text\">US</code> region, I used <code class=\"language-text\">West US 2</code> and got speeds in the excess of 2000Mb/s for both downloading and uploading the cache. You will have to configure an application id with the appropriate access rights configured to access your storage container. Please follow the docs <a href=\"https://docs.microsoft.com/en-us/azure/storage/common/storage-auth-aad-app\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a></p>\n<p>Once you have created your storage container, you will need to define the following environment variables in AppCenter:</p>\n<ul>\n<li>AZCOPY_SPA_CLIENT_SECRET</li>\n<li>AZCOPY_APPLICATION_ID</li>\n<li>AZCOPY_TENANT_ID</li>\n<li>AZURE_STORAGE_ACCOUNT_NAME</li>\n</ul>\n<p>I have tested that the fastest way to archive and extract is by using <code class=\"language-text\">pigz</code>, we'll also need <code class=\"language-text\">azcopy</code> to talk to our storage blob container but <code class=\"language-text\">azcopy</code> is already included in the build machines.</p>\n<ol>\n<li>We're installing <code class=\"language-text\">pigz</code> via the brew command</li>\n<li>Login to your blob storage account so you can copy the files</li>\n<li>Run commands to copy the <code class=\"language-text\">node_modules</code> archive and the hash of <code class=\"language-text\">yarn.lock</code></li>\n<li>Check if a <code class=\"language-text\">node_modules</code> archive exist, if it does extract the archive to the source directory</li>\n</ol>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">appcenter-post-clone.sh</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"40117667000876310000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`# Install Azure CLI\n# AppCenter already has azcopy\nbrew install pigz\necho &quot;Downloading node cache&quot;\n\n# Azure Cache\nazcopy login --service-principal  --application-id=\\$AZCOPY_APPLICATION_ID --tenant-id=\\$AZCOPY_TENANT_ID || true\nazcopy copy &quot;https://\\$AZURE_STORAGE_ACCOUNT_NAME.blob.core.windows.net/appcenter-cache/\\$APPCENTER_BRANCH/cache.tar.gz&quot; \\$APPCENTER_SOURCE_DIRECTORY/cache.tar.gz || true\nazcopy copy &quot;https://\\$AZURE_STORAGE_ACCOUNT_NAME.blob.core.windows.net/appcenter-cache/\\$APPCENTER_BRANCH/yarn.lock.sha256sum&quot; \\$APPCENTER_SOURCE_DIRECTORY/yarn.lock.sha256sum || true\n\nif [[ -f cache.tar.gz ]];\nthen\n  echo &quot;Extracting node cache&quot;\n  unpigz < cache.tar.gz | tar -xC \\$APPCENTER_SOURCE_DIRECTORY/ || true\nelse\n  echo &quot;Node cache unavailable&quot;\nfi`, `40117667000876310000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># Install Azure CLI</span>\n<span class=\"token comment\"># AppCenter already has azcopy</span>\nbrew <span class=\"token function\">install</span> pigz\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Downloading node cache\"</span>\n\n<span class=\"token comment\"># Azure Cache</span>\nazcopy login --service-principal  --application-id<span class=\"token operator\">=</span><span class=\"token variable\">$AZCOPY_APPLICATION_ID</span> --tenant-id<span class=\"token operator\">=</span><span class=\"token variable\">$AZCOPY_TENANT_ID</span> <span class=\"token operator\">||</span> <span class=\"token boolean\">true</span>\nazcopy copy <span class=\"token string\">\"https://<span class=\"token variable\">$AZURE_STORAGE_ACCOUNT_NAME</span>.blob.core.windows.net/appcenter-cache/<span class=\"token variable\">$APPCENTER_BRANCH</span>/cache.tar.gz\"</span> <span class=\"token variable\">$APPCENTER_SOURCE_DIRECTORY</span>/cache.tar.gz <span class=\"token operator\">||</span> <span class=\"token boolean\">true</span>\nazcopy copy <span class=\"token string\">\"https://<span class=\"token variable\">$AZURE_STORAGE_ACCOUNT_NAME</span>.blob.core.windows.net/appcenter-cache/<span class=\"token variable\">$APPCENTER_BRANCH</span>/yarn.lock.sha256sum\"</span> <span class=\"token variable\">$APPCENTER_SOURCE_DIRECTORY</span>/yarn.lock.sha256sum <span class=\"token operator\">||</span> <span class=\"token boolean\">true</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-f</span> cache.tar.gz <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Extracting node cache\"</span>\n  unpigz <span class=\"token operator\">&lt;</span> cache.tar.gz <span class=\"token operator\">|</span> <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-xC</span> <span class=\"token variable\">$APPCENTER_SOURCE_DIRECTORY</span>/ <span class=\"token operator\">||</span> <span class=\"token boolean\">true</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Node cache unavailable\"</span>\n<span class=\"token keyword\">fi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol>\n<li>Check the hash of the <code class=\"language-text\">yarn.lock</code> file to the one we copied from cache to see if it's the same</li>\n<li>If it's not the same, we'll be reuploading the cache.</li>\n<li>Generate a new hash of the <code class=\"language-text\">yarn.lock</code> file</li>\n<li>Create an archive of the <code class=\"language-text\">node_modules</code> folder</li>\n<li>Upload cache only if it's bigger than 1 MB</li>\n</ol>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">appcenter-post-build.sh</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"20383746038625850000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`# Check the hash of yarn.lock\nif ! shasum -a 256 -c yarn.lock.sha256sum; then\n  echo &quot;Removing old node cache&quot;\n  rm -rf \\$APPCENTER_SOURCE_DIRECTORY/cache.tar.gz\n  rm -rf \\$APPCENTER_SOURCE_DIRECTORY/yarn.lock.sha256sum\n  echo &quot;yarn.lock checksum does not match cache&quot;\n  shasum -a 256 yarn.lock > yarn.lock.sha256sum\n  echo &quot;Archiving node cache&quot;\n  tar cf - node_modules | pigz -1 -p 32 > cache.tar.gz\n  NODE_ARCHIVE_SIZE=\\$(wc -c < cache.tar.gz)\n  if [[ \\$NODE_ARCHIVE_SIZE -ge 1000000 ]]\n  then\n    echo &quot;Uploading node cache&quot;\n    azcopy login --service-principal  --application-id=\\$AZCOPY_APPLICATION_ID --tenant-id=\\$AZCOPY_TENANT_ID || true\n    azcopy copy \\$APPCENTER_SOURCE_DIRECTORY/cache.tar.gz &quot;https://\\$AZURE_STORAGE_ACCOUNT_NAME.blob.core.windows.net/appcenter-cache/\\$APPCENTER_BRANCH/cache.tar.gz&quot; || true\n    azcopy copy \\$APPCENTER_SOURCE_DIRECTORY/yarn.lock.sha256sum &quot;https://\\$AZURE_STORAGE_ACCOUNT_NAME.blob.core.windows.net/appcenter-cache/\\$APPCENTER_BRANCH/yarn.lock.sha256sum&quot; || true\n  else\n    echo &quot;Node cache archive is too small to be valid, not uploading&quot;\n  fi\nelse\n  echo &quot;yarn.lock hash is the same as cache, not updating cache&quot;\nfi`, `20383746038625850000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># Check the hash of yarn.lock</span>\n<span class=\"token keyword\">if</span> <span class=\"token operator\">!</span> shasum <span class=\"token parameter variable\">-a</span> <span class=\"token number\">256</span> <span class=\"token parameter variable\">-c</span> yarn.lock.sha256sum<span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Removing old node cache\"</span>\n  <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> <span class=\"token variable\">$APPCENTER_SOURCE_DIRECTORY</span>/cache.tar.gz\n  <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> <span class=\"token variable\">$APPCENTER_SOURCE_DIRECTORY</span>/yarn.lock.sha256sum\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"yarn.lock checksum does not match cache\"</span>\n  shasum <span class=\"token parameter variable\">-a</span> <span class=\"token number\">256</span> yarn.lock <span class=\"token operator\">></span> yarn.lock.sha256sum\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Archiving node cache\"</span>\n  <span class=\"token function\">tar</span> cf - node_modules <span class=\"token operator\">|</span> pigz <span class=\"token parameter variable\">-1</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">32</span> <span class=\"token operator\">></span> cache.tar.gz\n  <span class=\"token assign-left variable\">NODE_ARCHIVE_SIZE</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">wc</span> <span class=\"token parameter variable\">-c</span> <span class=\"token operator\">&lt;</span> cache.tar.gz<span class=\"token variable\">)</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token variable\">$NODE_ARCHIVE_SIZE</span> <span class=\"token parameter variable\">-ge</span> <span class=\"token number\">1000000</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Uploading node cache\"</span>\n    azcopy login --service-principal  --application-id<span class=\"token operator\">=</span><span class=\"token variable\">$AZCOPY_APPLICATION_ID</span> --tenant-id<span class=\"token operator\">=</span><span class=\"token variable\">$AZCOPY_TENANT_ID</span> <span class=\"token operator\">||</span> <span class=\"token boolean\">true</span>\n    azcopy copy <span class=\"token variable\">$APPCENTER_SOURCE_DIRECTORY</span>/cache.tar.gz <span class=\"token string\">\"https://<span class=\"token variable\">$AZURE_STORAGE_ACCOUNT_NAME</span>.blob.core.windows.net/appcenter-cache/<span class=\"token variable\">$APPCENTER_BRANCH</span>/cache.tar.gz\"</span> <span class=\"token operator\">||</span> <span class=\"token boolean\">true</span>\n    azcopy copy <span class=\"token variable\">$APPCENTER_SOURCE_DIRECTORY</span>/yarn.lock.sha256sum <span class=\"token string\">\"https://<span class=\"token variable\">$AZURE_STORAGE_ACCOUNT_NAME</span>.blob.core.windows.net/appcenter-cache/<span class=\"token variable\">$APPCENTER_BRANCH</span>/yarn.lock.sha256sum\"</span> <span class=\"token operator\">||</span> <span class=\"token boolean\">true</span>\n  <span class=\"token keyword\">else</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Node cache archive is too small to be valid, not uploading\"</span>\n  <span class=\"token keyword\">fi</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"yarn.lock hash is the same as cache, not updating cache\"</span>\n<span class=\"token keyword\">fi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>So now you know how to cache <code class=\"language-text\">node_modules</code> in AppCenter. I have seen <code class=\"language-text\">yarn install</code> go up to 5 minutes in AppCenter, compared to only about 5 to 7 seconds when you use the cache. It also takes only about 15-30seconds in total for the cache to extract/archive. So all in all, it's still faster than doing a <code class=\"language-text\">yarn install</code> each time.</p>\n<p>Don't forget that you can do this for your other vendor folders too.</p>","excerpt":"You are using AppCenter as your CI/CD tool for your mobile app, and it's great in terms of helping you to distribute the apps to users to test and submitting the application to the Play Store/App Store. However, your build times are absymal and you…","timeToRead":4,"frontmatter":{"date":"12 July, 2021","updatedAt":null,"slug":"appcenter-caching-vendor-libraries","title":"AppCenter caching for Vendor libraries","tags":["appcenter","mobile app","android","ios","azure","react-native","node","dev ops"],"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAx0lEQVR42mN4YVCKiZ4blL4yrnijVQREQMZzbGqAiAGrztdGFfelU/eF1wERkAHkPidS8yvD8odaefvKJ55/cOvcg9v7yic91MwDChKl+aVh2RPtgiMZ7asLmtfkNx/K7HisXQAUJNbZbw3KJxukNKqGlGuELNRJ+qxf/owYZ4M8bFh+Tysno2NVedG01LZNvUXL3itnPDciztkgbxuUrTKM3aAbu8Ajd7ND3ludkueGpcRqBqJ3+uXvDCreahe/0S15YYhdDQDia/eu0yXAFQAAAABJRU5ErkJggg=="},"backgroundColor":"transparent","images":{"fallback":{"src":"/static/5398128e3dc92d9df33a4a78117c1994/6fc77/appcenter-caching-vendor-libraries.png","srcSet":"/static/5398128e3dc92d9df33a4a78117c1994/85ced/appcenter-caching-vendor-libraries.png 800w,\n/static/5398128e3dc92d9df33a4a78117c1994/7c498/appcenter-caching-vendor-libraries.png 1080w,\n/static/5398128e3dc92d9df33a4a78117c1994/6fc77/appcenter-caching-vendor-libraries.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/5398128e3dc92d9df33a4a78117c1994/28281/appcenter-caching-vendor-libraries.webp 800w,\n/static/5398128e3dc92d9df33a4a78117c1994/0b5d5/appcenter-caching-vendor-libraries.webp 1080w,\n/static/5398128e3dc92d9df33a4a78117c1994/a020d/appcenter-caching-vendor-libraries.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}}}},"comments":{"edges":[{"node":{"id":"bcdaca5b-966d-5174-9758-8f8d2c958c4f","slug":"appcenter-caching-vendor-libraries","name":"Max Metral","date":"03 March, 2022 at 3:03 PM","message":"What is the file/set of files that should be hashed for gradle dependencies? We haven't gotten this all working yet, but we're trying, so it's much appreciated!"}},{"node":{"id":"4ef64a6f-4b1b-5e5a-893d-63463c01ad76","slug":"appcenter-caching-vendor-libraries","name":"Zane","date":"08 March, 2022 at 3:03 AM","message":"Hey Max,\n\nSorry for the slow response. I believe the correct directory for gradle dependencies is simply ~/.gradle. That's what I have archived on my app at least."}},{"node":{"id":"68252000-4e76-503c-8fc5-ea76ce6f3ca3","slug":"appcenter-caching-vendor-libraries","name":"Sumesh Agarwal","date":"08 June, 2022 at 7:06 AM","message":"Hi Zane,\nThank you for the wonderful article, but I am getting the below error while running the post-clone script\nCan you help me ?\n\nfailed to perform copy command due to error: cannot use directory as source without --recursive or a trailing wildcard (/*)"}},{"node":{"id":"f9844007-341c-5529-a795-5b1955cf432f","slug":"appcenter-caching-vendor-libraries","name":"Sumesh Agarwal","date":"08 June, 2022 at 3:06 PM","message":"Hi Zane,\nI made some progress, but i am using aws s3 instead of azure.\nBut there is a problem. Even though i am able to upload the cache and download it the next time, the yarn install command is still visible in the build output. \nWhy is that ? Am I missing something here."}},{"node":{"id":"907a645a-81b1-51fc-99d0-e4a03d508182","slug":"appcenter-caching-vendor-libraries","name":"Zane","date":"09 June, 2022 at 1:06 AM","message":"Hey Sumesh,\n\nWhat did you mean by the yarn command is still visible in the output? The yarn command will still run, its just that it will use the cache instead of pulling all the packages directly, you can tell by how long the yarn command takes to run as it will print out a \"Done in [xx]s\" message."}}]}},"pageContext":{"slug":"appcenter-caching-vendor-libraries"}},"staticQueryHashes":["3649515864","983108779"],"slicesMap":{}}