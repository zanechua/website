{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/reduce-react-native-xcode-build-time/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://zanechua.com"}},"posts":{"html":"<p>This was a tough cookie to crack for me. I've been annoyed with how the iOS builds of the <a href=\"https://kopirun.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">KopiRun</a> app take like 45minutes to build in AppCenter and was trying to figure out a way to cache the <code class=\"language-text\">DerivedData</code> that gets compiled when you build the app.</p>\n<p>For most cases, it's not really an issue since you can get incremental builds if you're building it locally and compile times are pretty spiffy from my experience at least. However that is very different from trying to archive the project and in a <code class=\"language-text\">Release</code> configuration. XCode will <strong>clean</strong> your project and remove any cached data so everytime you try to archive your app, it'll compile everything from scratch. Compiling locally on the M1 Mac isn't the issue but I had to find a way to reduce the build time for iOS.</p>\n<h1 id=\"Journey\" style=\"position:relative;\">Journey<a href=\"#Journey\" aria-label=\"Journey permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>I spent a lot of time searching and trying out different methods of optimisation, from setting the project's <code class=\"language-text\">Optimization Level</code>, <code class=\"language-text\">Compilation Mode</code>, <a href=\"https://ccache.dev\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ccache</a>, <a href=\"https://github.com/sweatco/xcode-archive-cache\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">xcode-archive-cache</a>, <a href=\"https://github.com/grab/cocoapods-binary-cache\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cocoapods-binary-cache</a> but none of it worked well enough or some were just totally irrelevant and only for pure XCode Projects which is not the case. There was a post by someone else about using FastLane to do it but unfortunately we don't use FastLane for <a href=\"https://kopirun.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">KopiRun</a> at the moment.</p>\n<p>Searching even more landed me on the project <a href=\"https://github.com/mikehardy/buildcache-action\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>buildcache-action</strong></a>, which is a GitHub action for react-native projects, created by one of the core team members of the <code class=\"language-text\">react-native-firebase</code> project. It uses <a href=\"https://github.com/mbitsnbites/buildcache\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>buildcache</strong></a> and he saw a 40-50% reduction in the amount of time it took to build the app and I am seeing such improvements too.</p>\n<p>On the first run, it will take the same amount of time as your normal builds but subsequent runs will definitely be 40-50% faster.</p>\n<h1 id=\"Solve\" style=\"position:relative;\">Solve<a href=\"#Solve\" aria-label=\"Solve permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>You'll have to download the latest release from <a href=\"https://github.com/mbitsnbites/buildcache/releases\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a> and extract that to a directory that's in your path.</p>\n<p>The instructions below are for MacOS:</p>\n<ol>\n<li>Download v0.27.1 of <code class=\"language-text\">buildcache</code></li>\n<li>Extract <code class=\"language-text\">buildcache</code></li>\n<li>Move <code class=\"language-text\">buildcache</code> to <code class=\"language-text\">/usr/local/bin</code></li>\n<li>Make <code class=\"language-text\">buildcache</code> executable</li>\n<li>Verify the <code class=\"language-text\">buildcache</code> command works by invoking the version argument.</li>\n</ol>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">terminal</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"95964499700414610000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`curl -L -O https://github.com/mbitsnbites/buildcache/releases/download/v0.27.1/buildcache-macos.zip\nunzip buildcache-macos.zip\nmv buildcache/bin/buildcache /usr/local/bin/buildcache\nchmod +x /usr/local/bin/buildcache\nbuildcache -V\n\nBuildCache version 0.27.1\nCopyright (c) 2018-2021 Marcus Geelnard\n\nSupported back ends:\n  local - Local file system based cache (level 1)\n  Redis - Remote in-memory cache (level 2)\n  HTTP  - Remote webdav cache (level 2)\n  S3    - Remote object storage based cache (level 2)\n\nThird party components:\n  cJSON 1.7.13\n  cpp-base64 2.rc.04\n  hiredis 1.0.1\n  HTTPRequest\n  lua 5.3.4\n  lz4 1.9.2\n  xxhash 0.8.0\n  zstd 1.4.5`, `95964499700414610000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-L</span> <span class=\"token parameter variable\">-O</span> https://github.com/mbitsnbites/buildcache/releases/download/v0.27.1/buildcache-macos.zip\n<span class=\"token function\">unzip</span> buildcache-macos.zip\n<span class=\"token function\">mv</span> buildcache/bin/buildcache /usr/local/bin/buildcache\n<span class=\"token function\">chmod</span> +x /usr/local/bin/buildcache\nbuildcache <span class=\"token parameter variable\">-V</span>\n\nBuildCache version <span class=\"token number\">0.27</span>.1\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">2018</span>-2021 Marcus Geelnard\n\nSupported back ends:\n  <span class=\"token builtin class-name\">local</span> - Local <span class=\"token function\">file</span> system based cache <span class=\"token punctuation\">(</span>level <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  Redis - Remote in-memory cache <span class=\"token punctuation\">(</span>level <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  HTTP  - Remote webdav cache <span class=\"token punctuation\">(</span>level <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  S3    - Remote object storage based cache <span class=\"token punctuation\">(</span>level <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\nThird party components:\n  cJSON <span class=\"token number\">1.7</span>.13\n  cpp-base64 <span class=\"token number\">2</span>.rc.04\n  hiredis <span class=\"token number\">1.0</span>.1\n  HTTPRequest\n  lua <span class=\"token number\">5.3</span>.4\n  lz4 <span class=\"token number\">1.9</span>.2\n  xxhash <span class=\"token number\">0.8</span>.0\n  zstd <span class=\"token number\">1.4</span>.5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>So now that you've installed <code class=\"language-text\">buildcache</code>, it's really easy to setup. We'll need to make our <code class=\"language-text\">clang</code> and <code class=\"language-text\">clang++</code> commands appear before the original commands as we need to wrap these commands with the <code class=\"language-text\">buildcache</code> command.</p>\n<p>We can do so by checking the path variable that's configured on your system.</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">terminal</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"25442525061140664000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`echo \\$PATH\n/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin`, `25442525061140664000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token environment constant\">$PATH</span>\n/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">clang</code> and <code class=\"language-text\">clang++</code> are located in <code class=\"language-text\">/usr/bin</code> but we need our commands to come before so that it takes priority when we invoke the commands which allows us to not have to modify the project extensively and it's basically a drop in replacement.</p>\n<p>You can either add a path e.g.<code class=\"language-text\">~/bin</code> to your <code class=\"language-text\">$PATH</code> variable and do the symlink there or just symlink <code class=\"language-text\">buildcache</code> into <code class=\"language-text\">/usr/local/bin</code> like I am going to do:</p>\n<ol>\n<li>Create symlinks for both <code class=\"language-text\">clang</code> and <code class=\"language-text\">clang++</code></li>\n<li>Use the <code class=\"language-text\">which</code> command to determine the location of the command we're invoking</li>\n</ol>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">terminal</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"11834343278828640000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`ln -s /usr/local/bin/buildcache /usr/local/bin/clang\nln -s /usr/local/bin/buildcache /usr/local/bin/clang++\nwhich clang\n#/usr/local/bin/clang\nwhich clang++\n#/usr/local/bin/clang++`, `11834343278828640000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /usr/local/bin/buildcache /usr/local/bin/clang\n<span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /usr/local/bin/buildcache /usr/local/bin/clang++\n<span class=\"token function\">which</span> clang\n<span class=\"token comment\">#/usr/local/bin/clang</span>\n<span class=\"token function\">which</span> clang++\n<span class=\"token comment\">#/usr/local/bin/clang++</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Once you have the above set-up, you just need to make a small modification to your <code class=\"language-text\">Podfile</code>. This change does not affect other users who do not have <code class=\"language-text\">buildcache</code> installed in their systems and they can compile the app as per normal albeit a bit slower on subsequent runs.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"62879466990354490000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`post_install do |installer|\nreact_native_post_install(installer)\n\ninstaller.pods_project.targets.each do |target|\n  target.build_configurations.each do |config|\n    config.build_settings[&quot;CC&quot;] = &quot;clang&quot;\n    config.build_settings[&quot;LD&quot;] = &quot;clang&quot;\n    config.build_settings[&quot;CXX&quot;] = &quot;clang++&quot;\n    config.build_settings[&quot;LDPLUSPLUS&quot;] = &quot;clang++&quot;\n  end\nend\nend`, `62879466990354490000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">post_install <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>installer<span class=\"token operator\">|</span>\nreact_native_post_install<span class=\"token punctuation\">(</span>installer<span class=\"token punctuation\">)</span>\n\ninstaller<span class=\"token punctuation\">.</span>pods_project<span class=\"token punctuation\">.</span>targets<span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>target<span class=\"token operator\">|</span>\n  target<span class=\"token punctuation\">.</span>build_configurations<span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>config<span class=\"token operator\">|</span>\n    config<span class=\"token punctuation\">.</span>build_settings<span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"CC\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"clang\"</span></span>\n    config<span class=\"token punctuation\">.</span>build_settings<span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"LD\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"clang\"</span></span>\n    config<span class=\"token punctuation\">.</span>build_settings<span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"CXX\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"clang++\"</span></span>\n    config<span class=\"token punctuation\">.</span>build_settings<span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"LDPLUSPLUS\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"clang++\"</span></span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>That's it! You can verify the the time it takes to build by appending the <code class=\"language-text\">time</code> command infront of the <code class=\"language-text\">xcodebuild</code> command. Run it twice and compare the difference!</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">terminal</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"44649145612210540000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`time xcodebuild -workspace ios/kopirun.xcworkspace -scheme kopirun -sdk iphoneos -configuration Release archive -archivePath \\$PWD/ios/build/kopirun.xcarchive`, `44649145612210540000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">time</span> xcodebuild <span class=\"token parameter variable\">-workspace</span> ios/kopirun.xcworkspace <span class=\"token parameter variable\">-scheme</span> kopirun <span class=\"token parameter variable\">-sdk</span> iphoneos <span class=\"token parameter variable\">-configuration</span> Release archive <span class=\"token parameter variable\">-archivePath</span> <span class=\"token environment constant\">$PWD</span>/ios/build/kopirun.xcarchive</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","headings":[{"id":"Journey","value":"Journey","depth":1},{"id":"Solve","value":"Solve","depth":1}],"excerpt":"This was a tough cookie to crack for me. I've been annoyed with how the iOS builds of the KopiRun app take like 45minutes to build in AppCenter and was trying to figure out a way to cache the  that gets compiled when you build the app. For most cases…","timeToRead":3,"frontmatter":{"date":"19 July, 2021","updatedAt":null,"slug":"reduce-react-native-xcode-build-time","title":"Reduce React Native XCode build time","tags":["xcode","mobile app","ios","react-native","dev ops"],"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA00lEQVR42mOQnP0aB3olOeuVyNwPknPe4FLDgFVUavZr0bkfBGe9N23fKTHlocTc9yCziNEM1Ck2+63a5Kt2PXviy1pN+46JzXolRZzNryTnvhfvu7588+6bV65cu3SxYsFOvinPpOe+IaxZavYr8bkfFLrOnjx56vrtBw9u3shacoJ36guZOW+Icrb03LeCkx71Ld369Oalxzevrli3RbTvhuQ8LN7G6udXIrPfa0+8EDdzX9zsgzaTT4nMeiNFUmiLzXnHN/Md/8z3IrPfSeGIKgDOFgnw6H28cgAAAABJRU5ErkJggg=="},"backgroundColor":"transparent","images":{"fallback":{"src":"/static/b71a4681fa4905fffb002fd29b9cf0fd/6fc77/reduce-react-native-xcode-build-time.png","srcSet":"/static/b71a4681fa4905fffb002fd29b9cf0fd/85ced/reduce-react-native-xcode-build-time.png 800w,\n/static/b71a4681fa4905fffb002fd29b9cf0fd/7c498/reduce-react-native-xcode-build-time.png 1080w,\n/static/b71a4681fa4905fffb002fd29b9cf0fd/6fc77/reduce-react-native-xcode-build-time.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/b71a4681fa4905fffb002fd29b9cf0fd/28281/reduce-react-native-xcode-build-time.webp 800w,\n/static/b71a4681fa4905fffb002fd29b9cf0fd/0b5d5/reduce-react-native-xcode-build-time.webp 1080w,\n/static/b71a4681fa4905fffb002fd29b9cf0fd/a020d/reduce-react-native-xcode-build-time.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}}}},"comments":{"edges":[{"node":{"id":"94820814-e71c-553d-958a-32079c04f6fe","slug":"reduce-react-native-xcode-build-time","name":"Matt","date":"23 December, 2021 at 12:12 PM","message":"Cheers for this - very interesting. I'm a little confused though - the instructions are all about setting up buildcache on a mac, so I could install it locally and have faster builds locally. But how does this help on AppCenter, is there a way to get buildcache on there too so that AppCenter build agents can use it?\n\nDoes it involve something like taking the bash script you posted, and running that as part of the build (I see you can add custom build scripts in AppCenter for example)"}},{"node":{"id":"ca7a3548-74dc-5e97-b336-0ce2f43b479c","slug":"reduce-react-native-xcode-build-time","name":"Zane","date":"23 December, 2021 at 12:12 PM","message":"Hey Matt,\n\nYes you're absolutely right. That's the way that you can do it. You can take the commands and put them in the AppCenter scripts to use buildcache on their build machines too. I am no longer using buildcache as xcode-archive-cache works a bit faster. Though I could probably check my git history for the version that I implemented in the AppCenter scripts when I was using buildcache.\n\nI think I should write up a post about an end to end implementation on putting together all the parts to improve build times in AppCenter."}},{"node":{"id":"31b30f30-bb88-5f86-956f-e227b1bccac6","slug":"reduce-react-native-xcode-build-time","name":"Alaa","date":"08 February, 2022 at 10:02 AM","message":"Hi !\nWhere are the steps where the cache is created/restored/used ?"}},{"node":{"id":"4a5935e0-0558-5ca4-adbf-de5a336720fe","slug":"reduce-react-native-xcode-build-time","name":"Zane","date":"08 February, 2022 at 11:02 AM","message":"Hi Alaa,\n\nbuildcache handles all of that automatically and the above is all that you need to get the cache working."}},{"node":{"id":"7669a3d7-f93f-5c30-855e-99c6d5a583bc","slug":"reduce-react-native-xcode-build-time","name":"Hailson Junior","date":"24 June, 2022 at 2:06 AM","message":"Where do buildcache store cache?\n\nI'm trying to use it on my GitLab pipeline."}},{"node":{"id":"96aee920-7358-51f6-9be8-042bdcc7d2cd","slug":"reduce-react-native-xcode-build-time","name":"Zane","date":"25 June, 2022 at 12:06 PM","message":"Per the usage docs, the default directory where the cache is stored is `$HOME/.buildcache`.\n\nYou can set the `BUILDCACHE_DIR` environment variable to any other directory that you would like the cache to be stored in.\n\nSee https://github.com/mbitsnbites/buildcache/blob/master/doc/usage.md#using-with-visual-studio--msbuild"}}]}},"pageContext":{"slug":"reduce-react-native-xcode-build-time"}},"staticQueryHashes":["3649515864","983108779"],"slicesMap":{}}