{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/dependency-between-services-gitlab-pipelines/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://zanechua.com"}},"posts":{"html":"<h1 id=\"Journey\" style=\"position:relative;\">Journey<a href=\"#Journey\" aria-label=\"Journey permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>In almost any project, you'll want to have some form of testing to ensure that the appliance is working correctly. For this case, we're testing that the built api container can start, connect to the database and redis endpoints and execute functions without fail.</p>\n<p>Let's assume that we have a pipeline with the following stages.</p>\n<ul>\n<li>build</li>\n<li>test</li>\n<li>deploy</li>\n</ul>\n<p>The build stage is responsible for building the container.</p>\n<p>The test stage is responsible for testing the container.</p>\n<p>The deploy stage is responsible for deploying the container.</p>\n<p>We want to test the container as an artifact, therefore we want to actually boot the container, supply it with similar environment values as you would in a production environment then expect it to be able to complete all api requests according to your snapshots or expected responses.</p>\n<p>GitLab allows you to boot services in a job however these services are not interlinked until you turn on a particular <a href=\"https://gitlab.com/gitlab-org/gitlab-runner/-/issues/1042#note_144420147\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">feature flag</a>. Ideally you would want to wait for these services to boot before you start up your container. GitLab does not have a simple way to do that at the moment but I'm going to show you how to achieve this.</p>\n<h1 id=\"Solve\" style=\"position:relative;\">Solve<a href=\"#Solve\" aria-label=\"Solve permalink\" class=\"remark-header-anchor after\"><svg id=\"header-anchor-icon\" aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>We're adding some feature flags as well as some additional configuration options for the pipeline to speed it up. The key feature flag here that enables the communication between the services to work is the <code class=\"language-text\">FF_NETWORK_PER_BUILD</code>. Basically this allows the services to be provisioned within the same virtual network on the runner and be able to talk to each other.</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">gitlab-ci.yml</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"18933679433280725000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`variables:\n  FF_USE_FASTZIP: &quot;true&quot; # enable fastzip - a faster zip implementation that also supports level configuration.\n  ARTIFACT_COMPRESSION_LEVEL: fastest # can also be set to fastest, fast, slow and slowest. If just enabling fastzip is not enough try setting this to fastest or fast.\n  CACHE_COMPRESSION_LEVEL: fastest # same as above, but for caches\n  TRANSFER_METER_FREQUENCY: 5s # will display transfer progress every 5 seconds for artifacts and remote caches.\n  FF_NETWORK_PER_BUILD: &quot;true&quot; # enable shared network per build among services`, `18933679433280725000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">variables</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">FF_USE_FASTZIP</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span> <span class=\"token comment\"># enable fastzip - a faster zip implementation that also supports level configuration.</span>\n  <span class=\"token key atrule\">ARTIFACT_COMPRESSION_LEVEL</span><span class=\"token punctuation\">:</span> fastest <span class=\"token comment\"># can also be set to fastest, fast, slow and slowest. If just enabling fastzip is not enough try setting this to fastest or fast.</span>\n  <span class=\"token key atrule\">CACHE_COMPRESSION_LEVEL</span><span class=\"token punctuation\">:</span> fastest <span class=\"token comment\"># same as above, but for caches</span>\n  <span class=\"token key atrule\">TRANSFER_METER_FREQUENCY</span><span class=\"token punctuation\">:</span> 5s <span class=\"token comment\"># will display transfer progress every 5 seconds for artifacts and remote caches.</span>\n  <span class=\"token key atrule\">FF_NETWORK_PER_BUILD</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span> <span class=\"token comment\"># enable shared network per build among services</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The idea over here is a bit of a mash-up between a few solutions I found while scavenging GitLab tickets. Particularly these two issues:</p>\n<ul>\n<li><a href=\"https://gitlab.com/gitlab-org/gitlab-runner/-/issues/1042#note_144420147\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://gitlab.com/gitlab-org/gitlab-runner/-/issues/1042#note_144420147</a></li>\n<li><a href=\"https://gitlab.com/gitlab-org/gitlab-runner/-/issues/3210#note_380999884\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://gitlab.com/gitlab-org/gitlab-runner/-/issues/3210#note_380999884</a></li>\n</ul>\n<p>We have the following 3 services:</p>\n<ul>\n<li>apiserver</li>\n<li>mariadb</li>\n<li>redis</li>\n</ul>\n<p>Based on the two issues, and understanding of how the GitLab runners operate. You're actually able to write files back to the <code class=\"language-text\">$CI_PROJECT_DIR</code>. Kinda using it as a state directory that is accessible to all 3 services.</p>\n<p>We have some code that on completion of initialization will write a file to the <code class=\"language-text\">$CI_PROJECT_DIR</code> which indicates that the service is ready.</p>\n<p>The <code class=\"language-text\">apiserver</code> service waits until the project has checked out before proceeding and creates an initialization file.</p>\n<p>When mariadb is booted, we start to run the migrations and seeders to set up the test environment.</p>\n<p>The <code class=\"language-text\">apiserver</code> service waits again until it finds both initialization files for mariadb and redis. Only then does it hand off the control to the actual entrypoint inside the container. Once handed-off, the container will initialize it as you would if you ran <code class=\"language-text\">docker run</code> using the container as the image.</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">gitlab-ci.yml</div>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"94711764260842620000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`test_stage:\n  stage: test\n  services:\n    - name: \\$CI_REGISTRY/\\$CI_PROJECT_ROOT_NAMESPACE/backend:latest\n      alias: apiserver\n      command: [&quot;node&quot;, &quot;-r&quot;, &quot;dotenv/config&quot;, &quot;index.js&quot;]\n      entrypoint:\n        - '/bin/sh'\n        - '-c'\n        - |\n          # wait for project clone/checkout\n          # i'm relying on git index to indicate the clone/checkout is done\n          until [ -f &quot;\\$CI_PROJECT_DIR/.git/index&quot; ]; do sleep 1; done;\n          echo 'Project is checked out'\n          # especially after the lock file has been removed\n          while [ -f &quot;\\$CI_PROJECT_DIR/.git/index.lock&quot; ]; do sleep 1; done;\n          echo 'Project lock removed'\n          HAS_CONTAINER_INITIALIZED=&quot;/srv/http/www/backend/init.touch&quot;\n          # Check for container init file\n          if [ ! -e &quot;\\$HAS_CONTAINER_INITIALIZED&quot; ] ; then\n            touch &quot;\\$HAS_CONTAINER_INITIALIZED&quot;\n            echo &quot;Setting container up for first run&quot;\n            until [ -f &quot;\\$CI_PROJECT_DIR/mysql.init.touch&quot; ]; do sleep 1; done;\n            echo &quot;SQL container initialized&quot;\n            # wait 10 second to ensure mysqlserver is up\n            sleep 10\n            echo &quot;Running migrations&quot;\n            yarn migrate\n            echo &quot;Seeding database&quot;\n            yarn seed\n            until [ -f &quot;\\$CI_PROJECT_DIR/redis.init.touch&quot; ]; do sleep 1; done;\n            echo &quot;Redis container initialized&quot;\n            # wait 10 second to ensure redis is up\n            sleep 10\n            echo &quot;Bootstrapping done&quot;\n          else\n            echo &quot;Container has been initialized before&quot;\n          fi\n          # pass control to the default image entrypoint\n          exec /usr/local/bin/docker-entrypoint.sh &quot;\\$@&quot;\n        # arg \\$0 should be explicitly passed when using 'sh -c' entrypoints\n        - '/bin/sh'\n    - name: mariadb:10.6.3\n      alias: database\n      command: [ &quot;mysqld&quot;, &quot;--default-authentication-plugin=mysql_native_password&quot; ]\n      entrypoint:\n        - '/bin/bash'\n        - '-c'\n        - |\n          # wait for project clone/checkout\n          # i'm relying on git index to indicate the clone/checkout is done\n          until [ -f &quot;\\$CI_PROJECT_DIR/.git/index&quot; ]; do sleep 1; done;\n          echo 'Project is checked out';\n          # especially after the lock file has been removed\n          while [ -f &quot;\\$CI_PROJECT_DIR/.git/index.lock&quot; ]; do sleep 1; done;\n          echo 'Project lock removed';\n          # copy/setup database init scripts as you need\n          cp -R &quot;\\$CI_PROJECT_DIR/docker/init/.&quot; /docker-entrypoint-initdb.d/\n          # let backend container know that mysql has booted\n          touch \\$CI_PROJECT_DIR/mysql.init.touch\n          echo 'Scripts copied';\n          # pass control to the default image entrypoint\n          exec /usr/local/bin/docker-entrypoint.sh &quot;\\$@&quot;\n        # arg \\$0 should be explicitly passed when using 'bash -c' entrypoints\n        - '/bin/bash'\n    - name: redis:6.2.4-alpine\n      alias: redis\n      command: [ &quot;redis-server&quot;]\n      entrypoint:\n        - '/bin/sh'\n        - '-c'\n        - |\n          # wait for project clone/checkout\n          # i'm relying on git index to indicate the clone/checkout is done\n          until [ -f &quot;\\$CI_PROJECT_DIR/.git/index&quot; ]; do sleep 1; done;\n          echo 'Project is checked out';\n          # especially after the lock file has been removed\n          while [ -f &quot;\\$CI_PROJECT_DIR/.git/index.lock&quot; ]; do sleep 1; done;\n          echo 'Project lock removed';\n          # let backend container know that redis has booted\n          touch \\$CI_PROJECT_DIR/redis.init.touch\n          # pass control to the default image entrypoint\n          exec /usr/local/bin/docker-entrypoint.sh &quot;\\$@&quot;\n        # arg \\$0 should be explicitly passed when using 'bash -c' entrypoints\n        - '/bin/sh'`, `94711764260842620000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">test_stage</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">stage</span><span class=\"token punctuation\">:</span> test\n  <span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> $CI_REGISTRY/$CI_PROJECT_ROOT_NAMESPACE/backend<span class=\"token punctuation\">:</span>latest\n      <span class=\"token key atrule\">alias</span><span class=\"token punctuation\">:</span> apiserver\n      <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-r\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dotenv/config\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">entrypoint</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'/bin/sh'</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'-c'</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          # wait for project clone/checkout\n          # i'm relying on git index to indicate the clone/checkout is done\n          until [ -f \"$CI_PROJECT_DIR/.git/index\" ]; do sleep 1; done;\n          echo 'Project is checked out'\n          # especially after the lock file has been removed\n          while [ -f \"$CI_PROJECT_DIR/.git/index.lock\" ]; do sleep 1; done;\n          echo 'Project lock removed'\n          HAS_CONTAINER_INITIALIZED=\"/srv/http/www/backend/init.touch\"\n          # Check for container init file\n          if [ ! -e \"$HAS_CONTAINER_INITIALIZED\" ] ; then\n            touch \"$HAS_CONTAINER_INITIALIZED\"\n            echo \"Setting container up for first run\"\n            until [ -f \"$CI_PROJECT_DIR/mysql.init.touch\" ]; do sleep 1; done;\n            echo \"SQL container initialized\"\n            # wait 10 second to ensure mysqlserver is up\n            sleep 10\n            echo \"Running migrations\"\n            yarn migrate\n            echo \"Seeding database\"\n            yarn seed\n            until [ -f \"$CI_PROJECT_DIR/redis.init.touch\" ]; do sleep 1; done;\n            echo \"Redis container initialized\"\n            # wait 10 second to ensure redis is up\n            sleep 10\n            echo \"Bootstrapping done\"\n          else\n            echo \"Container has been initialized before\"\n          fi\n          # pass control to the default image entrypoint\n          exec /usr/local/bin/docker-entrypoint.sh \"$@\"</span>\n        <span class=\"token comment\"># arg $0 should be explicitly passed when using 'sh -c' entrypoints</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'/bin/sh'</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">:</span>10.6.3\n      <span class=\"token key atrule\">alias</span><span class=\"token punctuation\">:</span> database\n      <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"mysqld\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--default-authentication-plugin=mysql_native_password\"</span> <span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">entrypoint</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'/bin/bash'</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'-c'</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          # wait for project clone/checkout\n          # i'm relying on git index to indicate the clone/checkout is done\n          until [ -f \"$CI_PROJECT_DIR/.git/index\" ]; do sleep 1; done;\n          echo 'Project is checked out';\n          # especially after the lock file has been removed\n          while [ -f \"$CI_PROJECT_DIR/.git/index.lock\" ]; do sleep 1; done;\n          echo 'Project lock removed';\n          # copy/setup database init scripts as you need\n          cp -R \"$CI_PROJECT_DIR/docker/init/.\" /docker-entrypoint-initdb.d/\n          # let backend container know that mysql has booted\n          touch $CI_PROJECT_DIR/mysql.init.touch\n          echo 'Scripts copied';\n          # pass control to the default image entrypoint\n          exec /usr/local/bin/docker-entrypoint.sh \"$@\"</span>\n        <span class=\"token comment\"># arg $0 should be explicitly passed when using 'bash -c' entrypoints</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'/bin/bash'</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> redis<span class=\"token punctuation\">:</span>6.2.4<span class=\"token punctuation\">-</span>alpine\n      <span class=\"token key atrule\">alias</span><span class=\"token punctuation\">:</span> redis\n      <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"redis-server\"</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">entrypoint</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'/bin/sh'</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'-c'</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          # wait for project clone/checkout\n          # i'm relying on git index to indicate the clone/checkout is done\n          until [ -f \"$CI_PROJECT_DIR/.git/index\" ]; do sleep 1; done;\n          echo 'Project is checked out';\n          # especially after the lock file has been removed\n          while [ -f \"$CI_PROJECT_DIR/.git/index.lock\" ]; do sleep 1; done;\n          echo 'Project lock removed';\n          # let backend container know that redis has booted\n          touch $CI_PROJECT_DIR/redis.init.touch\n          # pass control to the default image entrypoint\n          exec /usr/local/bin/docker-entrypoint.sh \"$@\"</span>\n        <span class=\"token comment\"># arg $0 should be explicitly passed when using 'bash -c' entrypoints</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'/bin/sh'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hopefully this gives you an idea of how to test your container in an as close to production environment as possible.</p>","excerpt":"Journey In almost any project, you'll want to have some form of testing to ensure that the appliance is working correctly. For this case, we're testing that the built api container can start, connect to the database and redis endpoints and executeâ€¦","timeToRead":4,"frontmatter":{"date":"07 November, 2021","updatedAt":null,"slug":"dependency-between-services-gitlab-pipelines","title":"Dependency between Services in GitLab Pipelines","tags":["gitlab","dev ops","ci cd","testing"],"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAvUlEQVR42o2PQQuCQBCF/ScFZRGl7q67umtFIB1E6NBBCFYDdXc62CXo/9MYdMrDwmMOM3zvvfEksxOiJiVGMpi+/uT9r1LSZ0m/V2jRZxynlaORCxyDiNrTcchUvVk1cfhMko4rM1q4JGNbxczab+DCoZQ+aQ7lKw079HWBLbYlu6HNhT4H8wXmdyoGx2R8EqS8B8V1ttTvqHhwHVGbucIUhKhzXXNmDK0qemMUf3GEv3yytYoBYRCzCRL1ARvxgVf8dzT2AAAAAElFTkSuQmCC"},"backgroundColor":"transparent","images":{"fallback":{"src":"/static/20a37187070444320797c6ec3792156c/6fc77/dependency-between-services-gitlab-pipelines.png","srcSet":"/static/20a37187070444320797c6ec3792156c/85ced/dependency-between-services-gitlab-pipelines.png 800w,\n/static/20a37187070444320797c6ec3792156c/7c498/dependency-between-services-gitlab-pipelines.png 1080w,\n/static/20a37187070444320797c6ec3792156c/6fc77/dependency-between-services-gitlab-pipelines.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/20a37187070444320797c6ec3792156c/28281/dependency-between-services-gitlab-pipelines.webp 800w,\n/static/20a37187070444320797c6ec3792156c/0b5d5/dependency-between-services-gitlab-pipelines.webp 1080w,\n/static/20a37187070444320797c6ec3792156c/a020d/dependency-between-services-gitlab-pipelines.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}}}},"comments":{"edges":[{"node":{"id":"8b8508dd-0e49-5f30-ba7f-f9df02f332ef","slug":"dependency-between-services-gitlab-pipelines","name":"fieldemser","date":"13 October, 2023 at 9:10 AM","message":"Thanks for the info. I am trying to get this to run using a Docker image from a private docker repo and am failing at the login stage when the image is to be pulled from the repo. There isnt much information as to how to handle this in Gitlab CI Services. Do you have any idea how to get this to work? If I understand it correctly, this should work via setting the DOCKER_AUTH_CONFIG in the services' variable section but at least for me no luck thus far."}}]}},"pageContext":{"slug":"dependency-between-services-gitlab-pipelines"}},"staticQueryHashes":["3649515864","983108779"],"slicesMap":{}}